{"version":3,"sources":["MyEpic.js","App.js","index.js","../node_modules/jsdom/lib/jsdom sync","../node_modules/parse5/lib sync"],"names":["MyEpic","require","JSDOM","props","state","authToken","activeStory","user_owner_id","user_name","user_avatar","user_items","user_friend_wishes","user_my_mark_wishes","friends","friends_for_look","wish_owner_id","wish_name","wish_description","wish_reference_url","wish_price","wish_photo_url","wish_importance","friend_id","friend_name","friend_avatar","friend_items","gift_id","gift_owner_id","gift_photo_url","gift_name","gift_reference_url","gift_price","gift_modified","gift_description","gift_already_presented","tooltip1","tooltip2","validate_url","popout","onStoryChange","bind","onAddWish","handleChangeForAddWish","getFriends","onFriendClickHandler","onBackClick","loadFriendsWishes","callShareDialog","callShareDialogFriend","onFriendResponse","onDeleteGiftClickHandler","historyScreen","openDefault","closePopout","this","setState","actions","title","autoclose","mode","action","connect","send","push","onClose","e","length","console","log","pop","loadWishlistByShare","currentTarget","dataset","story","getStorage","indexOf","postData","method_name","owner_id","owner_name","owner_avatar","name","description","reference_url","price","photo_url","importance","then","data","JSON","stringify","loadWishList","catch","error","items","uids","i","id","item","already_presented","removeDuplicates","originalArray","prop","newArray","lookupObject","url","fetch","method","cache","credentials","headers","redirect","referrer","body","response","json","api","fetchJsonp","res","undefined","setStorage","subscribe","detail","hasOwnProperty","type","photo_200","first_name","last_name","access_token","window","location","hash","replace","scope","request_id","time","Promise","resolve","setTimeout","event","target","value","friend","user_id","gift","_id","modified","tabbar","onClick","selected","data-story","text","activePanel","class","style","margin","src","size","cornerOffset","offsetX","alignX","isShown","color","map","index","key","onGiftClickHandler","before","width","height","multiline","left","marginTop","opacity","backgroundColor","maxWidth","maxHeight","fontWeight","fontSize","toLocaleString","component","href","level","Date","parse","year","month","day","onSetMarkGiftClickHandler","top","maxlength","onChange","React","Component","App","ReactDOM","render","document","getElementById","webpackEmptyContext","req","Error","code","keys","module","exports"],"mappings":"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","file":"static/js/main.53186581.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport fetchJsonp from 'fetch-jsonp';\nimport { Div,View, Panel, PanelHeader, Group, List, Cell,Tabbar,TabbarItem,Epic,Button, Avatar,Slider, Input, FormLayoutGroup,FormLayout, PanelHeaderButton, Tooltip, Alert} from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport Icon28Newsfeed from '@vkontakte/icons/dist/28/newsfeed';\nimport Icon28Search from '@vkontakte/icons/dist/28/search';\nimport Icon28Messages from '@vkontakte/icons/dist/28/messages';\nimport Icon28Notifications from '@vkontakte/icons/dist/28/notifications';\nimport Icon28More from '@vkontakte/icons/dist/28/more';\nimport Icon24Share from '@vkontakte/icons/dist/24/share'\nimport Icon24Back from '@vkontakte/icons/dist/24/back'\nimport Icon24ShareOutline from '@vkontakte/icons/dist/24/share_outline';\nimport Icon24Gift from '@vkontakte/icons/dist/24/gift';\nimport Icon24User from '@vkontakte/icons/dist/24/user';\nimport Icon24Newsfeed from '@vkontakte/icons/dist/24/newsfeed';\nimport Icon24Favorite from '@vkontakte/icons/dist/24/favorite';\n\nimport connect from '@vkontakte/vk-connect';\nimport './App.css';\n\n// import 'css/flexboxgrid.min.css';\n\n\nconst jsdom = require(\"jsdom\");\nconst { JSDOM } = jsdom;\n\n\nclass MyEpic extends React.Component {\n  constructor(props) {\n    super(props);\n    \n\n    this.state = {\n      authToken: null,\n      activeStory: 'wish',\n      user_owner_id: null,\n      user_name: null,\n      user_avatar: null,\n      user_items: [],\n      user_friend_wishes: [],\n      user_my_mark_wishes: [],\n      friends: [],\n      friends_for_look: [],\n      wish_owner_id: null,\n      wish_name: null,\n      wish_description: null,\n      wish_reference_url: null,\n      wish_price: null,\n      wish_photo_url: null,\n      wish_importance: null,\n      friend_id: null,\n      friend_name: null,\n      friend_avatar: null,\n      friend_items: [],\n      gift_id: null,\n      gift_owner_id: null,\n      gift_photo_url: null,\n      gift_name: null,\n      gift_reference_url: null,\n      gift_price: null,\n      gift_modified: null,\n      gift_description: null,\n      gift_already_presented: null,\n      tooltip1: true,\n      tooltip2: true,\n      validate_url: false,\n      popout: null\n    };\n\n    this.onStoryChange = this.onStoryChange.bind(this);\n    this.onAddWish = this.onAddWish.bind(this);\n    this.handleChangeForAddWish = this.handleChangeForAddWish.bind(this);\n    this.getFriends = this.getFriends.bind(this);\n    this.onFriendClickHandler = this.onFriendClickHandler.bind(this);\n    this.onBackClick = this.onBackClick.bind(this);\n    this.loadFriendsWishes = this.loadFriendsWishes.bind(this);\n    this.callShareDialog = this.callShareDialog.bind(this);\n    this.callShareDialogFriend = this.callShareDialogFriend.bind(this);\n    \n    this.onFriendResponse = this.onFriendResponse.bind(this);  \n    this.onDeleteGiftClickHandler = this.onDeleteGiftClickHandler.bind(this);\n    this.historyScreen = [this.state.activeStory]\n\n    this.openDefault = this.openDefault.bind(this);\n    this.closePopout = this.closePopout.bind(this);\n    // this.loadWishList = this.loadWishList.bind(this);\n  }\n\n  openDefault () {\n    this.setState({ popout:\n      <Alert\n        actions={[{\n          title: 'Отмена',\n          autoclose: true,\n          mode: 'cancel'\n        }, {\n          title: 'Дать доступ',\n          autoclose: true,\n          action: () => {\n            connect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7241610, \"scope\": \"\"});\n            this.historyScreen.push(\"add_wish\")\n            this.setState({ activeStory: \"add_wish\" })\n          }\n        }]}\n        onClose={this.closePopout}\n      >\n        <h2>Подтвердите действие</h2>\n        <p>Для добавления подарка нам нужно убедиться, что вы хозяин аккаунта. Для этого вам нужно предоставить доступ к общей информации.</p>\n      </Alert>\n    });\n  }\n\n  closePopout () {\n    this.setState({ popout: null });\n  }\n\n  onBackClick (e) {\n  \tif(this.historyScreen.length == 1){\n\t\t    return;\n  \t}\n  \tconsole.log(\"onBackClick = \" + this.historyScreen.length);\n    this.historyScreen.pop();\n    console.log(\"onBackClick = \" + this.historyScreen.length);\n    this.setState({ activeStory: this.historyScreen[this.historyScreen.length-1] })\n    if(this.historyScreen[this.historyScreen.length-1] == \"friend\"){\n        this.loadWishlistByShare(this.state.friend_id);\n    }\n  }\n  onStoryChange (e) {\n    if(e.currentTarget.dataset.story == \"add_wish\"){\n      if(this.state.authToken == null){\n        this.openDefault()\n        return\n      }\n      this.historyScreen.push(e.currentTarget.dataset.story)\n    }else{\n      if(this.state.friends.length == 0){\n        this.getStorage()\n      }\n      this.historyScreen = [e.currentTarget.dataset.story]\n      if(e.currentTarget.dataset.story != \"wish\"){\n          \n      }\n    }\n  \t\n    this.setState({ activeStory: e.currentTarget.dataset.story })\n  }\n  onFriendResponse (e) {\n    connect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7241610, \"scope\": \"friends\"});\n  }\n\n  onAddWish (e) {\n    if(this.state.wish_reference_url.indexOf(\"http\") == -1 && this.state.wish_reference_url.indexOf(\".com/\") == -1 && this.state.wish_reference_url.indexOf(\".ru/\") == -1){\n        this.setState({validate_url: true});\n        return\n    }\n    this.postData('https://upmob.ru/api/mirrorWishList', {method_name:\"addGift\",owner_id: this.state.wish_owner_id,owner_name: this.state.user_name, owner_avatar: this.state.user_avatar, name: this.state.wish_name, description:this.state.wish_description,reference_url:this.state.wish_reference_url, price:this.state.wish_price, photo_url:this.state.wish_photo_url, importance:this.state.wish_importance})\n      .then(data => {\n          console.log(JSON.stringify(data)) // JSON-строка полученная после вызова `response.json()`\n          this.loadWishList(this.state.user_owner_id)\n          this.onBackClick (e);\n\n          this.setState({wish_price: null});\n          this.setState({wish_photo_url: null});\n          this.setState({wish_description: null});\n          this.setState({wish_name: null});\n          \n      })\n      .catch(error => console.error(error));\n  }\n  loadWishList (wish_owner_id) {\n    console.log(\"wish_owner_id = \" + wish_owner_id);\n\n    this.postData('https://upmob.ru/api/mirrorWishList', {method_name:\"getGiftsByUserId\", owner_id: wish_owner_id})\n      .then(data =>{\n        console.log(JSON.stringify(data)) // JSON-строка полученная после вызова `response.json()`\n        this.setState({ user_items: data.items})\n      }) \n      .catch(error => console.error(error));\n  }\n\n  loadFriendsWishes (friends) {\n    var uids = \"\"\n    for(var i = 0; i < friends.length; i++){\n    \tif(i == 0){\n    \t\tuids += \"\"+friends[i].id;\n    \t}else{\n    \t\tuids += \",\"+friends[i].id;\n    \t}    \t\n    }\n    console.log(\"loadFriendsWishes uids = \" + uids)\n\n    this.postData('https://upmob.ru/api/mirrorWishList', {method_name:\"getGiftsForFriends\", uids: uids})\n      .then(data =>{\n        console.log(\"loadFriendsWishes res = \" + JSON.stringify(data)) // JSON-строка полученная после вызова `response.json()`\n        \n        this.state.user_my_mark_wishes = [];\n        for(var i = 0; i < data.items.length; i++){\n            var item = data.items[i];\n\n            if(item.already_presented != null && item.already_presented == this.state.user_owner_id){\n               this.state.user_my_mark_wishes.push(item)\n\n            }\n        }\n        this.setState({ user_friend_wishes: data.items})\n        this.setState({ friends_for_look: this.removeDuplicates(data.items, \"owner_id\")})\n\n      }) \n      .catch(error => console.error(error));\n  }\n  removeDuplicates(originalArray, prop) {\n     var newArray = [];\n     var lookupObject  = {};\n\n     for(var i in originalArray) {\n        lookupObject[originalArray[i][prop]] = originalArray[i];\n     }\n\n     for(i in lookupObject) {\n         newArray.push(lookupObject[i]);\n     }\n      return newArray;\n }\n\n  postData(url = '', data = {}) {\n  // Значения по умолчанию обозначены знаком *\n    return fetch(url, {\n\t        method: 'POST', // *GET, POST, PUT, DELETE, etc.\n\t        mode: 'cors', // no-cors, cors, *same-origin\n\t        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t        credentials: 'same-origin', // include, *same-origin, omit\n\t        headers: {\n\t            'Content-Type': 'application/json',\n\t            // 'Content-Type': 'application/x-www-form-urlencoded',\n\t        },\n\t        redirect: 'follow', // manual, *follow, error\n\t        referrer: 'no-referrer', // no-referrer, *client\n\t        body: JSON.stringify(data), // тип данных в body должен соответвовать значению заголовка \"Content-Type\"\n\t    }).then(response => response.json()); // парсит JSON ответ в Javascript объект\n\t}\n\tgetFriends() {\n\t\tconst ownerId = 124527492\n\t\tlet api = `https://api.vk.com/method/friends.get?v=5.52&access_token=${this.state.authToken}&fields=photo_100`\n\t\tfetchJsonp(api)\n\t\t.then(res => res.json())\n\t\t.then(data => {\n\t\t\tconsole.log(\"getFriends data = \" + JSON.stringify(data))\n\t\t\tthis.setState({ friends : data.response.items});\n\t\t\tthis.loadFriendsWishes(data.response.items)\n      if(data.response.items != undefined){\n        this.setStorage()\n      }\n\t\t})\n\t\t.catch(e => {\n\t\t\tconsole.log(\"getFriends e = \" + e)\n\t\t})\n\t}\n\n  setStorage() {\n    const ownerId = 124527492\n    let api = `https://api.vk.com/method/storage.set?v=5.52&access_token=${this.state.authToken}&key=${this.state.user_owner_id}hasFriendsResponse3&value=1`\n    fetchJsonp(api)\n    .then(res => res.json())\n    .then(data => {\n      console.log(\"setStorage data = \" + JSON.stringify(data))\n    })\n    .catch(e => {\n      console.log(\"setStorage e = \" + e)\n    })\n  }\n\n  getStorage() {\n    const ownerId = 124527492\n    let api = `https://api.vk.com/method/storage.get?v=5.52&access_token=${this.state.authToken}&key=${this.state.user_owner_id}hasFriendsResponse3`\n    fetchJsonp(api)\n    .then(res => res.json())\n    .then(data => {\n      if(data.response == \"1\"){\n        // connect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7241610, \"scope\": \"friends\"});\n      }\n    })\n    .catch(e => {\n      console.log(\"setStorage e = \" + e)\n    })\n  }\n\n\n  \n\n  \n\n  componentDidMount() {\n    connect.subscribe((e) => {\n      console.log(\"e = \" + JSON.stringify(e));\n      console.log(\"e = \" + JSON.stringify(e));\n      if (e.detail.hasOwnProperty('type')) {\n        switch (e.detail.type) {\n          case 'VKWebAppGetUserInfoResult':\n            console.log(\"e.detail.data = \" + JSON.stringify(e.detail.data));\n            console.log(\"this.state.avatar = \" + this.state.user_avatar);\n            this.setState({ user_avatar: e.detail.data.photo_200 });\n            this.setState({ user_name: e.detail.data.first_name + \" \" + e.detail.data.last_name});\n            this.setState({ wish_owner_id: e.detail.data.id + \"\"});\n            this.setState({ authToken : e.detail.data.access_token });\n\n            if(this.state.user_owner_id == null){\n            \tthis.setState({ user_owner_id: e.detail.data.id + \"\"});\n            }\n            this.loadWishList(this.state.wish_owner_id);\n\n            console.log(\"window.location.href = \" + window.location.hash);\n            if(window.location.hash != undefined && window.location.hash.length > 0){\n              this.loadWishlistByShare(window.location.hash.replace(\"#\",\"\"))\n            }\n            break;\n          case 'VKWebAppInit':\n            \n            break;\n          case 'VKWebAppAccessTokenReceived':\n            this.setState({ authToken : e.detail.data.access_token });\n            if(e.detail.data.scope == \"friends\"){\n              this.getFriends();\n            }else{\n              this.getStorage()\n            }\n      \t\t\t\n            \n            // setTimeout(() => {\n            //   this.getFriends();\n            // }, 1000);\n            \n    \t\t\t\n    \t\t\tbreak;\n          case 'VKWebAppCallAPIMethodResult':\n            debugger;\n            if (e.detail.data.request_id === '34bc') {\n              this.setState({ friends: e.detail.data.response.items });\n            }\n            break;\n          case 'VKWebAppGetAuthToken':\n            // this.getFriends();\n            // setTimeout(() => {\n            //   this.getFriends();\n            // }, 2000);\n\n            \n            break;\n          default:\n            break;\n        }\n      }\n    });\n\n    connect.send('VKWebAppInit');\n    connect.send('VKWebAppGetUserInfo', {});\n    // connect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7241610, scope:\"\"});\n    \n\n    // connect\n    //   .sendPromise('VKWebAppGetAuthToken')\n    //   .then(data => {\n    //     // Обработка события в случае успеха\n    //     console.log(\"data= \" + JSON.stringify(data));\n    //     \n    //   })\n    //   .catch(error => {\n    //     // Обработка события в случае ошибки\n    //     console.log(\"error= \" + JSON.stringify(error));\n    //   });\n  }\n  sleep (time) {\n    return new Promise((resolve) => setTimeout(resolve, time));\n  }\n  async handleChangeForAddWish(event) {\n      const target = event.target;\n      console.log('event', event);\n      var value = target.value;\n      var name = target.name;\n      \n\n      switch (name) {\n          case 'wish_reference_url':\n              if(value == undefined){\n                  return;\n              }\n\n              if(value.indexOf(\"market.yandex.ru\") == -1){\n\t              \t// this.setState({wish_price: \"Цена не известна\"});\n\t                this.setState({wish_photo_url: \"https://vk.com/images/vkapp_i.png\"});\n\t                this.setState({wish_description: \"\"});\n\t                this.setState({wish_reference_url: value});\n                  return;\n              }\n              value = value.replace(\"m.market.yandex.ru\",\"market.yandex.ru\")\n\n              this.setState({wish_reference_url: value});\n              \n              this.postData('https://upmob.ru/api/mirrorWishList', {method_name:\"getFromYandexMarget\", reference_url: value})\n              .then(data =>{\n                this.setState({wish_price: data.wish_price});\n                this.setState({wish_photo_url: data.wish_photo_url.replace(\"http\",\"https\")});\n                this.setState({wish_description: data.wish_description});\n                this.setState({wish_name: data.wish_name});\n              }) \n              .catch(error => console.error(error));\n              \n              break;\n          case 'wish_name':\n              this.setState({wish_name: value});\n              break;\n          default:\n              console.log('unknown name', name);\n      }\n  }\n\n  onFriendClickHandler(friend,e) {\n  \tconsole.log(\"e id = \" + friend + \" \" + e);\n    this.historyScreen.push(\"friend\")\n  \tthis.setState({ activeStory: \"friend\" })\n  \tthis.setState({ friend_id: friend.owner_id})\n  \tthis.setState({ friend_name: friend.owner_name })\n  \tthis.setState({ friend_avatar: friend.owner_avatar})\n  \t\n  \tthis.postData('https://upmob.ru/api/mirrorWishList', {method_name:\"getGiftsByUserId\", owner_id: friend.owner_id})\n      .then(data =>{\n        console.log(JSON.stringify(data)) // JSON-строка полученная после вызова `response.json()`\n        this.setState({ friend_items: data.items})\n      }) \n      .catch(error => console.error(error));\n  }\n\n  loadWishlistByShare(user_id) {\n    \n    this.postData('https://upmob.ru/api/mirrorWishList', {method_name:\"getGiftsByUserId\", owner_id: user_id})\n      .then(data =>{\n        console.log(JSON.stringify(data)) // JSON-строка полученная после вызова `response.json()`\n        this.setState({ friend_items: data.items})\n        this.setState({ activeStory: \"friend\" })\n        this.historyScreen.push(\"friend\")\n\n        if(data.items.length > 0){\n            this.setState({ friend_id: data.items[0].owner_id})\n            this.setState({ friend_name: data.items[0].owner_name})\n            this.setState({ friend_avatar: data.items[0].owner_avatar})\n        }\n      }) \n      .catch(error => console.error(error));\n  }\n\n  onGiftClickHandler(gift,e) {\n  \tconsole.log(\"e id = \" + gift + \" \" + e);\n    this.historyScreen.push(\"gift\")\n  \tthis.setState({ activeStory: \"gift\" })\n\n\t  this.setState({ gift_id: gift._id })\n  \tthis.setState({ gift_owner_id: gift.owner_id })\n  \tthis.setState({ gift_photo_url: gift.photo_url })\n  \tthis.setState({ gift_name: gift.name })\n  \tthis.setState({ gift_price: gift.price })\n    this.setState({ gift_reference_url: gift.reference_url})\n\n  \tthis.setState({ gift_modified: gift.modified })\n  \tthis.setState({ gift_description: gift.description })\n\n  \tthis.setState({ gift_already_presented: gift.already_presented })\n\n  \tconsole.log(\"onGiftClickHandler gift_owner_id = \" + this.state.gift_photo_url + \" \" + this.state.user_owner_id);\n  }\n\n  onSetMarkGiftClickHandler(e) {\n    console.log(\"onSetMarkGiftClickHandler 1\")\n  \tif(this.state.gift_already_presented == this.state.user_owner_id || this.state.gift_already_presented == null){\n  \t\tconsole.log(\"onSetMarkGiftClickHandler 2\")\n      var owner_id = null;\n  \t\tif(this.state.gift_already_presented == null){\n  \t\t\towner_id = this.state.user_owner_id \n  \t\t}\n\n      // for(var i = 0; i < this.state.user_my_mark_wishes.length; i++){\n      //     var item = this.state.user_my_mark_wishes[i];\n      //     if(item._id == this.state.gift_id){\n      //        item.gift_already_presented = owner_id;\n      //     }\n      // }\n\n      // for(var i = 0; i < this.state.user_friend_wishes.length; i++){\n      //     var item = this.state.user_friend_wishes[i];\n\n      //     if(item._id == this.state.gift_id){\n      //       console.log(\"onSetMarkGiftClickHandler 2 = \" + item._id + \" \" + this.state.gift_id)\n      //        item.gift_already_presented = owner_id;\n      //        console.log(\"onSetMarkGiftClickHandler gift_already_presented = \" + item.gift_already_presented )\n      //     }\n      // }\n      // this.setState({ user_friend_wishes: this.state.user_friend_wishes });\n\n  \t\tthis.setState({ gift_already_presented: owner_id })\n  \t\tthis.postData('https://upmob.ru/api/mirrorWishList', {method_name:\"setMarkToBuyGifts\", gift_id: this.state.gift_id, owner_id: owner_id})\n\t      .then(data =>{\n\t        console.log(JSON.stringify(data)) // JSON-строка полученная после вызова `response.json()`\n          this.getFriends()\n\n          this.loadFriendsWishes(this.state.friends)\n\t      }) \n\t      .catch(error => console.error(error));\n\n  \t}\n  }\n\n\n  onDeleteGiftClickHandler(e) {\n    console.log(\"onDeleteGiftClickHandler 1\")\n    this.postData('https://upmob.ru/api/mirrorWishList', {method_name:\"removeGift\", gift_id: this.state.gift_id})\n        .then(data =>{\n          console.log(JSON.stringify(data)) // JSON-строка полученная после вызова `response.json()`\n          this.loadFriendsWishes(this.state.friends)\n          this.loadWishList(this.state.user_owner_id)\n          this.onBackClick(e)\n        }) \n        .catch(error => console.error(error));\n  }\n\n  callShareDialog(e) {\n    connect.send(\"VKWebAppShare\", {\"link\": \"https://vk.com/app7241610#\"+this.state.user_owner_id});\n  }\n  callShareDialogFriend(e) {\n    connect.send(\"VKWebAppShare\", {\"link\": \"https://vk.com/app7241610#\"+this.state.friend_id});\n  }\n\n\n\n\n\n\n\n  \n\n  render () {\n    return (\n      <Epic activeStory={this.state.activeStory} tabbar={\n        <Tabbar>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'wish'}\n            data-story=\"wish\"\n            text=\"Мои желания\"\n          ><Icon24Gift /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'friends'}\n            data-story=\"friends\"\n            text=\"Друзья\"\n          ><Icon24User /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'feed'}\n            data-story=\"feed\"\n            text=\"Лента\"\n          ><Icon24Newsfeed/></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'list_presents'}\n            data-story=\"list_presents\"\n            text=\"Я подарю\"\n          ><Icon24Favorite/></TabbarItem>\n        </Tabbar>\n      }>\n        <View id=\"wish\" activePanel=\"wish\" popout={this.state.popout}>\n          <Panel id=\"wish\">\n            <PanelHeader>Мои желания</PanelHeader>\n            <Div>\n              <div class=\"flexbox-container\" >\n                <div><div class=\"ava2\"><div class=\"centered5\">{this.state.user_items.length}</div><p style={{margin: 5}}>Желаний</p></div></div>\n                <div><Avatar src={this.state.user_avatar} size={140}/></div>\n                <Tooltip text=\"Поделитесь с друзьями Вишлистом, когда он будет готов\" cornerOffset={-10}\n                    offsetX={7} alignX=\"right\" onClose={() => this.setState({ tooltip2: false})} isShown={this.state.tooltip2 && this.state.user_items.length > 0}>\n                     <div><div class=\"ava3\" onClick={this.callShareDialog.bind(this)}><div class=\"centered6\"><Icon24ShareOutline style={{color: \"#000000\"}} class=\"iconShare\" /></div><p>Поделиться</p></div></div>\n              </Tooltip>\n               \n              </div>\n              <div class=\"centered7\" >{this.state.user_name}</div>\n              <div class=\"centered10\">\n               <Button onClick={this.onStoryChange} data-story=\"add_wish\" size=\"xl\">Добавить желание</Button>\n             </div>\n            </Div>\n              \n             <Group>\n              <List>\n                { \n                  this.state.user_items.length > 0 && this.state.user_items.map((item, index) => (\n                    <Cell \n                      key={index}\n                      onClick={this.onGiftClickHandler.bind(this,item)}\n                      before={\n                        <img \n                          style={{ \n                            width: 40, \n                            height : 40, \n                            margin : 10 \n                          }} \n                          src={item.photo_url}\n                        />\n                      }\n                      multiline\n                      description={\n                        item.price != undefined &&\n                        item.price+\" ₽\"} \n                    >\n                    {item.name}\n                    </Cell>\n                  ))\n                }\n                {\n                  this.state.user_items.length == 0 &&\n                  <Div>\n                    Список желаний пуст.\n                  </Div>\n                }\n              </List>\n            </Group>\n          </Panel>\n        </View>\n        <View id=\"friend\" activePanel=\"wish\">\n          <Panel id=\"wish\">\n            <PanelHeader left={<PanelHeaderBack onClick={this.onBackClick} />}>Желания друга</PanelHeader>\n              <div class=\"flexbox-container\" \n                   style={{marginTop: \"20px\"}}>\n                  <div><div class=\"ava2\"><div class=\"centered5\">{this.state.friend_items.length}</div><p style={{margin: 5}}>Желаний</p></div></div>\n                  <div><Avatar src={this.state.friend_avatar} size={140} /></div>\n                  <div><div class=\"ava3\" onClick={this.callShareDialogFriend.bind(this)}><div class=\"centered6\"><Icon24ShareOutline style={{color: \"#000000\"}} class=\"iconShare\" /></div><p>Поделиться</p></div></div>\n              </div>\n              <div class=\"centered7\">{this.state.friend_name}</div><div class=\"centered8\" style={{color: \"#888888\"}}><p>Желаний: {this.state.friend_items.length}</p></div>\n             <Group>\n              <List>\n                { \n                  this.state.friend_items.length > 0 && this.state.friend_items.map((item, index) => (\n                    <Cell \n                      key={index}\n                      onClick={this.onGiftClickHandler.bind(this,item)}\n                      style={{opacity: item.already_presented && item.owner_id != undefined && item.owner_id != this.state.user_owner_id  ? 0.3 : 1}}\n                      before={\n                        <img \n                          style={{ \n                            width: 40, \n                            height : 40, \n                            margin : 10 \n                          }} \n                          src={item.photo_url}\n                        />\n                      }\n                      multiline\n                      description={\n                        item.price != undefined && item.already_presented == undefined ?\n                       item.price+\" ₽\" :\n                        item.already_presented != undefined && item.owner_id != undefined && item.owner_id != this.state.user_owner_id  &&\n                        \"Подарок забронирован\"} \n                    >\n                    {item.name}\n                    </Cell>\n                  ))\n                }\n                {\n                  this.state.friend_items.length == 0 &&\n                  <Div>\n                    Список желаний пуст.\n                  </Div>\n                }\n              </List>\n            </Group>\n          </Panel>\n        </View>\n        <View id=\"gift\" activePanel=\"wish\">\n          <Panel id=\"wish\">\n            <PanelHeader left={<PanelHeaderBack onClick={this.onBackClick} />}>Подарок</PanelHeader>\n              <div class=\"centered11\" style={{backgroundColor:\"#FFFFFF\"}}>\n                  <img src={this.state.gift_photo_url} style={{maxWidth: \"50%\", maxHeight: \"50%\", margin: \"50px\"}}/>\n              </div>\n               <div class=\"centered3\" style={{fontWeight:600, fontSize:\"18pt\"}}>\n                  {this.state.gift_name} \n              </div>\n              <div class=\"centered3\" style={{color:\"#999999\", fontSize:\"13pt\"}}>\n                  {this.state.gift_price != null &&\n                    this.state.gift_price.toLocaleString('en')   + \" ₽\"}\n              </div>\n              <div class=\"centered3\">\n              \t<Button component=\"a\" target=\"_blank\" href={this.state.gift_reference_url} level=\"secondary\" size=\"xl\">Открыть ссылку</Button>\n              </div>\n              <div class=\"centered3\" style={{color:\"#999999\", fontSize:\"11pt\"}}>\n                  {\"Создано \" + (new Date(Date.parse(this.state.gift_modified)).toLocaleString(\"ru\", {year: 'numeric',month: 'long',day: 'numeric'})) } \n              </div>\n               <div class=\"centered3\">\n                  {this.state.gift_description} \n              </div>\n\t\t\t\t      {\n\t              this.state.gift_owner_id != this.state.user_owner_id && this.state.gift_already_presented == null &&\n\t              <Div class=\"centered4\">\n\t                <Button onClick={this.onSetMarkGiftClickHandler.bind(this)} size=\"xl\">Я подарю</Button>\n\t              </Div>\n\t            }\n\t            {\n\t              this.state.gift_owner_id != this.state.user_owner_id && this.state.gift_already_presented != null && this.state.gift_already_presented == this.state.user_owner_id && \n\t              <Div class=\"centered4\">\n                  <div>\n                    <p style={{color:\"#999999\"}}>Вы собираетесь подарить эту вещь</p>\n  \t                <Button onClick={this.onSetMarkGiftClickHandler.bind(this)} size=\"xl\">Отменить</Button>\n  \t              </div>\n                </Div>\n\t            }\n\t            {\n\t              this.state.gift_owner_id != this.state.user_owner_id && this.state.gift_already_presented != null && this.state.gift_already_presented != this.state.user_owner_id && \n\t              <Div class=\"centered4\">\n\t                 <p style={{color:\"#999999\"}} >Эта вещь уже забронирована.</p>\n\t              </Div>\n\t            }\n              {\n                this.state.gift_owner_id == this.state.user_owner_id &&\n                <Div class=\"centered4\">\n                  <div>\n                    <p style={{color:\"#999999\"}}>Вам уже подарили эту вещь? Или вы передумали?</p>\n                    <Button level=\"destructive\" mode=\"destructive\" size=\"xl\" onClick={this.onDeleteGiftClickHandler.bind(this)}>Удалить карточку</Button>\n                  </div>\n                </Div>\n              }\n\t\t\t\n          </Panel>\n        </View>\n        <View id=\"friends\" activePanel=\"friends\">\n          <Panel id=\"friends\">\n            <PanelHeader>Друзья</PanelHeader>\n            <Group>\n              <List>\n                { \n                  this.state.friends_for_look.length > 0 && this.state.friends_for_look.map((item, index) => (\n                    <Cell \n                      key={index}\n                      onClick={this.onFriendClickHandler.bind(this,item)}\n                      before={\n                        <Avatar \n                          style={{ \n                            width: 40, \n                            height : 40\n                          }} \n                          src={item.owner_avatar}\n                        />\n                      }\n                      multiline\n                      description={\"Хочет \" + item.name + \" и еще...\"}\n                    >\n                    {item.owner_name}\n                    </Cell>\n                  ))\n                }\n                {\n                  this.state.friends_for_look.length == 0 && this.state.friends.length != 0 &&\n                  <Div>\n                    Друзей пока что нет в приложении :(\n                  </Div>\n                }\n                {\n                  this.state.friends.length == 0 &&\n                  <Div>\n                    Откройте доступ к списку друзей, чтобы увидеть их желания\n                    <div class=\"centered10\">\n                     <Button level=\"secondary\" size=\"l\" onClick={this.onFriendResponse}>Открыть доступ</Button>\n                   </div>\n                    \n                  </Div>\n                }\n              </List>\n            </Group>\n          </Panel>\n        </View>\n        <View id=\"feed\" activePanel=\"feed\">\n          <Panel id=\"feed\">\n            <PanelHeader>Желания друзей</PanelHeader>\n            <Group>\n              <List>\n                { \n                  this.state.user_friend_wishes.length > 0 && this.state.user_friend_wishes.map((item, index) => (\n                    <Cell \n                      key={index}\n                      onClick={this.onGiftClickHandler.bind(this,item)}\n                      before={\n                        <Avatar \n                          style={{ \n                            width: 40, \n                            height : 40, \n                            margin : 10 \n                          }} \n                          src={item.owner_avatar}\n                        />\n                      }\n                      multiline\n                      description={\n                        item.price != undefined &&\n                        item.price+\" ₽\"} \n                    >\n                    <div><img src={item.photo_url} style={{ \n                                          width: 30, \n                                          height : 30, \n                                          margin : 0 \n                                        }} /> </div>\n                    {item.name}\n                    </Cell>\n                  ))\n                }\n                {\n                  this.state.user_friend_wishes.length == 0 &&\n                  <Div>\n                    Ваши друзья еще не успели пожелать подарки :(\n                  </Div>\n                }\n              </List>\n            </Group>\n          </Panel>\n        </View>\n        <View id=\"list_presents\" activePanel=\"list_presents\">\n          <Panel id=\"list_presents\">\n            <PanelHeader>Собираюсь подарить</PanelHeader>\n            <Group>\n              <List>\n                { \n                  this.state.user_my_mark_wishes.length > 0 && this.state.user_my_mark_wishes.map((item, index) => (\n                    <Cell \n                      key={index}\n                      onClick={this.onGiftClickHandler.bind(this,item)}\n                      before={\n                        <Avatar \n                          style={{ \n                            width: 40, \n                            height : 40, \n                            margin : 10 \n                          }} \n                          src={item.owner_avatar}\n                        />\n                      }\n                      multiline\n                      description={\n                        item.price != undefined &&\n                        item.price+\" ₽\"} \n                    >\n                    <div><img src={item.photo_url} style={{ \n                            width: 30, \n                            height : 30, \n                            margin : 0 \n                          }} /> </div>\n                    {item.name}\n                    </Cell>\n                  ))\n                }\n                {\n                  this.state.user_my_mark_wishes.length == 0 &&\n                  <Div>\n                    Вы еще не выбрали, что хотите подарить:(\n                  </Div>\n                }\n              </List>\n            </Group>\n          </Panel>\n        </View>\n        <View id=\"add_wish\" activePanel=\"add_wish\">\n          <Panel id=\"add_wish\">\n          \t<PanelHeader left={<PanelHeaderButton onClick={this.onBackClick}><Icon24Back/></PanelHeaderButton>}> Добавить Желание</PanelHeader>\n             <Group>\n             <FormLayout>\n              <FormLayoutGroup top=\"Вставьте ссылку на продукт\">\n              <Tooltip text=\"Если ссылка из Яндекс маркета, то вся информация о продукте заполнится автоматически\" cornerOffset={-10}\n                    offsetX={7} alignX=\"right\" onClose={() => this.setState({ tooltip1: false})} isShown={this.state.tooltip1}>\n                  \n                \n                <Input maxlength=\"3000\" top=\"Ссылка\" onChange={this.handleChangeForAddWish} name=\"wish_reference_url\" />\n              </Tooltip>\n              </FormLayoutGroup>\n              {\n                this.state.validate_url != undefined && this.state.validate_url &&\n                 <Div  style={{color: \"#ff0000\"}}>Введите корректный URL</Div>\n              }\n              {\n                \n                this.state.wish_reference_url != undefined && this.state.wish_reference_url.length > 1 && this.state.wish_reference_url.indexOf(\"market.yandex.ru\") == -1 &&\n                  <FormLayoutGroup top=\"Напишите название подарка и цену\">\n                  <Input maxlength=\"200\" onChange={this.handleChangeForAddWish} name=\"wish_name\" />\n                  </FormLayoutGroup>\n              }\n            </FormLayout>\n            </Group>\n\n           \n          \t{\n          \t\tthis.state.wish_description != null && this.state.wish_description.length > 3 &&\n          \t\t<Cell \n\t              before={\n\t                <img \n\t                  style={{ \n\t                    width: 40, \n\t                    height : 40, \n\t                    margin : 10 \n\t                  }} \n\t                  src={this.state.wish_photo_url}\n\t                />\n\t              }\n\t              multiline\n\t              description={\n                  this.state.wish_price != undefined &&\n                  this.state.wish_price+\" ₽\"} \n\t            >\n\t            {this.state.wish_name}\n\t            </Cell>\n          \t}\n            \n          \t{\n              this.state.wish_name != undefined &&\n              <Div class=\"centered4\">\n                 <Button level=\"commerce\" onClick={this.onAddWish} data-story=\"add_wish\" size=\"l\">Готово</Button>\n              </Div>\n            }\n            {\n              this.state.wish_name == undefined &&\n              <Div class=\"centered4\">\n                 <Button level=\"secondary\" size=\"l\">Готово</Button>\n              </Div>\n            }\n          </Panel>\n        </View>\n      </Epic>\n    )\n  }\n}\n// <MyEpic />\nexport default MyEpic; ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { View, Panel, PanelHeader, Group, List, Cell } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport MyEpic from './MyEpic.js';\n\nfunction App () {\n  \n  return new MyEpic();\n  // return (\n  //   <View activePanel=\"main\">\n  //     <Panel id=\"main\">\n  //       <PanelHeader>VKUI</PanelHeader>\n  //       <Group title=\"Items\">\n  //         <List>\n  //           <Cell>Hello</Cell>\n  //           <Cell>World</Cell>\n  //         </List>\n  //       </Group>\n  //     </Panel>\n  //   </View>\n  // );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nexport default App;","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n// import connect from '@vkontakte/vkui-connect-mock';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 943;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 975;"],"sourceRoot":""}